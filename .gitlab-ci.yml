image: gradle:6.8.1-jdk15

before_script:
  - export GRADLE_USER_HOME=`pwd`/.gradle

cache:
  key:
    files:
      - wtune_data/data.version
  paths:
    - .gradle/caches
    - wtune_data/wtune.db
    - lib/libz3.so
    - lib/libz3java.so

variables:
  GRADLE_OPTS: "-Dorg.gradle.daemon=false"
  DOCKER_DRIVER: overlay2

stages:
  - test

unit-test:
  script:
    - gradle clean test --info
